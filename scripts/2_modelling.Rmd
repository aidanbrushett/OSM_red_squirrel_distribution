---
title: "Untitled"
output: html_document
date: "2025-03-20"
---

```{r}
library(MuMIn)
library(glmmTMB)
library(tidyverse)
library(broom) 
```

```{r data for modelling}

squirrels_all <- read_csv("data/raw/all_arrays_proportional_presence_weekly_clean.csv")
```

```{r clean up the wide dataframe for modelling}
squirrels_all <- squirrels_all %>%
   dplyr::select(
    array, site, red_squirrel, absent_red_squirrel, 
    starts_with("lc_grassland"), 
    starts_with("lc_coniferous"), 
    starts_with("lc_mixed"), 
    starts_with("lc_broadleaf"),
    starts_with("lc_shrub"),
    starts_with("harvest"), 
    starts_with("seismic_lines"),
    starts_with("seismic_lines_3D"),
    starts_with("transmission_lines"),
    starts_with("wells"),
    starts_with("roads"),
    starts_with("osm_industrial"), 
    starts_with("pipeline")
 )

```
## 1. Models 

The "core model" is the best performing habitat model that will be used in 
subsequent models. 

How to do proper model syntax when there is different scales? 

```{r the core model - 750 meter scale}

core <- glmmTMB::glmmTMB(cbind(red_squirrel, absent_red_squirrel) ~ 
                     scale(lc_coniferous) +
                     scale(lc_broadleaf) + 
                     scale(lc_shrub) +
                     scale(lc_grassland)  +
                     (1|array), 
                     data = squirrel, 
                     family = "binomial")

```



```{r the disturbance model}

dist <- glmmTMB::glmmTMB(cbind(red_squirrel, absent_red_squirrel) ~ 
                     scale(seismic)  +
                     scale(linear) +
                     scale(roads) +
                     scale(harvest)  +
                     scale(wells) +
                     (1|array), 
                     data = squirrel, 
                     family = "binomial")

```


