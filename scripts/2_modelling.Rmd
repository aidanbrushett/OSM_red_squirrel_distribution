---
title: "Untitled"
output: html_document
date: "2025-03-20"
---

```{r}
library(MuMIn)
library(glmmTMB)
library(tidyverse)
library(broom) 
```

```{r data for modelling}

squirrels_all <- read_csv("data/raw/all_arrays_proportional_presence_weekly_clean.csv")
```

```{r clean up the wide dataframe for modelling}

```
## 1. Models 

The "core model" is the best performing habitat model that will be used in 
subsequent models. 

How to do proper model syntax when there is different scales? 

```{r the core model - 750 meter scale}

core <- glmmTMB::glmmTMB(cbind(red_squirrel, absent_red_squirrel) ~ 
                     scale(lc_coniferous_750) +
                     scale(lc_broadleaf_750) + 
                     scale(lc_shrub_750) +
                     scale(lc_grassland_750)  +
                     (1|array), 
                     data = data_wide, 
                     family = "binomial")

summary(core)

```


```{r the disturbance model}

dist <- glmmTMB::glmmTMB(cbind(red_squirrel, absent_red_squirrel) ~ 
                     scale(seismic_2000)  +
                     scale(linear_2000) +
                     scale(roads_2000) +
                     scale(harvest_2000)  +
                     scale(wells_2000) +
                     (1|array), 
                     data = data_wide, 
                     family = "binomial")

summary(dist)

```


```{r the configuration model}
config <- glmmTMB::glmmTMB(cbind(red_squirrel, absent_red_squirrel) ~ 
                      +
                     (1|array), 
                     data = data_wide, 
                     family = "binomial")

```


```{r the configuration + dist model}
config <- glmmTMB::glmmTMB(cbind(red_squirrel, absent_red_squirrel) ~ 
                    
                             
                             scale(seismic_2000)  +
                     scale(linear_2000) +
                     scale(roads_2000) +
                     scale(harvest_2000)  +
                     scale(wells_2000) +
                     (1|array), 
                     data = data_wide, 
                     family = "binomial")

```
